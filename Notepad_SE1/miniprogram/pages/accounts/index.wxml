<view>
  <view class="topBar" style="display: flex;text-align: left;">

    <view style="font-size: 45rpx;margin-top: 20rpx;margin-left: 20rpx;">{{emptyDatabase?"^_^":"日期"}}
      <picker value="{{yearsIdx}}" range="{{years}}" bindchange="bindPickerChange"
        style="font-size: 35rpx; width: 158rpx; height: 106rpx; display: block; box-sizing: border-box; left: NaNrpx; top: NaNrpx">
        {{years[yearsIdx]}}</picker>
    </view>
    <view
      style="margin-left: 10%; font-size: 30rpx; margin-top: 55rpx; width: 158rpx; height: 141rpx; display: block; box-sizing: border-box; left: NaNrpx; top: NaNrpx">
      <text>本月支出\n{{dayCost}}¥</text>
    </view>
    <view style="margin-left: 10%;font-size:30rpx;margin-top:55rpx"><text>本月收入\n{{dayIncome}}¥</text></view>

  </view>
  <view class="topBar">
    <mp-sticky offset-top="64">
      <button size="mini" type="primary" style="margin:0 280rpx; background-color: #008F7A"
        bindtap="writeABillPopup">记一笔</button>
    </mp-sticky>
  </view>
</view>

<!-- 分割线 -->
<view style="height: 5px;background-color: gainsboro;"></view>

<view wx:if="{{emptyDatabase}}" style="text-align:center;margin-top:rpx;font-size:smaller;color:gray">* 记下我的第一笔账 *</view>


<mp-cells title="{{months[index]}}月" wx:for="{{months}}" wx:key="index" wx:for-item="monNum">
  <!-- <mp-slideview buttons="{{[1]}}">
    <mp-cell footer="说明文字">
      <mp-icon icon="add2" color="black" size="{{25}}"></mp-icon>
      首条记录
    </mp-cell>
  </mp-slideview> -->
  <view  wx:for="{{a_year_bill_data_Arr[monNum-1]}}" wx:key="index">
    <view style="display: flex;flex-direction: row;justify-content: space-around;margin-left: 20rpx;">
      <view style="flex-grow: 1;">{{item.day}}日</view>
      <view style="flex-grow: 1;text-align: center;">{{item.type}}</view>
      <view style="flex-grow: 1;text-align: right;margin-right: 20rpx;">{{item.money}}</view>
    </view>
    <view style="font-size: 30rpx;color: gray;margin-left:20rpx ; ">备注:{{item.remark}}</view>
  </view>
</mp-cells>
<!-- <mp-cells title="这里写日期too">
  <mp-cell>第二条记录</mp-cell>
</mp-cells> -->


<!-- 假页wxml -->
<page-container show="{{show}}" round="{{round}}" overlay="{{overlay}}" duration="{{duration}}" position="{{position}}"
  close-on-slide-down="{{false}}" bindbeforeenter="onBeforeEnter" bindenter="onEnter" bindafterenter="onAfterEnter"
  bindbeforeleave="onBeforeLeave" bindleave="onLeave" bindafterleave="onAfterLeave" bindclickoverlay="onClickOverlay"
  custom-style="{{customStyle}}" overlay-style="{{overlayStyle}}">
  <view style="background-color: #ABD9FF;">
    <view class="titleHeader">日期</view>
    <view>
      <picker mode="date" value="{{date}}" start="2000-07-14" end="{{today}}" bindchange="bindDateChange">
        <view style="display: flex;">
          <view style="flex-grow: 4;margin-left: 20rpx;">
            {{date}}</view>
          <view
            style="flex-grow: 0.5;background-color: #85d6ff;margin-right: 20rpx;border:3px solid #4090f8;border-radius:10px;text-align: center;font-size: smaller;color: white;font:bold"
            wx:if="{{date==today}}">今天</view>

        </view>
      </picker>
    </view>
    <view class="titleHeader">收支</view>
    <view class="HContainer">
      <button bindtap="selCost" style='background-color: {{costOrIncome=="cost"? "#009CE9" : "white" }};margin: 0 20rpx;'>支出</button>
      <button bindtap="selIncome" style='background-color: {{costOrIncome=="income"? "#009CE9" : "white" }};margin: 0 20rpx;'>收入</button>
    </view>
    <view class="titleHeader">类别</view>
    <view class="typeBox" wx:if='{{costOrIncome=="cost"}}'>
      
        
        <button class="typeBtn" bindtap="selCostType"
           id="food" style='background-color: {{costType=="food"? "#009CE9" : "white" }};margin: 0 20rpx;'>
          餐饮</button>
      
      
        
      <button class="typeBtn" bindtap="selCostType" style='background-color: {{costType=="dUse"? "#009CE9" : "white" }};margin: 0 20rpx;'
        id="dUse">日用</button>



      <button class="typeBtn" bindtap="selCostType"
        style='background-color: {{costType=="trans"? "#009CE9" : "white" }};margin: 0 20rpx;' id="trans">交通</button>
    </view>
    <view class="typeBox" wx:else>
      <button class="typeBtn" bindtap="selIncomeType"
        style='background-color: {{incomeType=="salary"? "#009CE9" : "white" }};margin: 0 20rpx;' id="salary">工资</button>
      <button class="typeBtn" bindtap="selIncomeType"
        style='background-color: {{incomeType=="bonus"? "#009CE9" : "white" }};margin: 0 20rpx;' id="bonus">奖金</button>

    </view>
    <form bindsubmit="formSubmit">
      <view>
        <view class="titleHeader">金额</view>
        <input name="money" class="inputBox" type="digit" placeholder="请输入金额" value="{{initInput}}" />
      </view>
      <view>
        <view class="titleHeader">备注</view>
        <input name="remark" class="inputBox" placeholder="请输入备注" value="{{initInput}}" />

      </view>
      <view class="HContainer" style="padding-left: 20rpx;">
        <button class="formBtn" form-type="submit">确定</button>
        <button class="formBtn" style="margin: 10rpx 20rpx;" bindtap="exitPage">取消</button>
      </view>
    </form>
  </view>
</page-container>